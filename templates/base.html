<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}TechNova Store | Cyber OO{% endblock %}</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <style>
        /* ========================================
           NOVO TEMA: "NEON / CYBERPUNK"
           ========================================
        */

        :root {
            --primary-color: #00F0FF; /* Ciano Elétrico (Neon) */
            --secondary-color: #F000FF; /* Rosa/Magenta (Neon) */
            --text-color: #E0E0E0; /* Texto quase branco */
            --bg-dark-1: #0D0D2B; /* Fundo principal (Azul muito escuro) */
            --bg-dark-2: #1A1A3D; /* Fundo secundário (Roxo/Azul escuro) */
            --border-color: #333366; /* Borda neon sutil */
        }

        body { 
            font-family: 'Chakra Petch', 'Roboto', sans-serif; 
            margin: 0; 
            padding: 0;
            background-color: var(--bg-dark-1);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        /* Cabeçalho Principal (Estilo Cyber) */
        .header {
            background-color: var(--bg-dark-2); 
            color: white;
            padding: 10px 40px;
            box-shadow: 0 4px 15px rgba(0, 240, 255, 0.2); /* Sombra Neon Azul */
            position: sticky; top: 0; z-index: 1000;
            border-bottom: 2px solid var(--primary-color);
        }
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px; 
            margin: auto;
        }
        
        /* Logo */
        .header-content h1 a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 700;
            font-size: 1.6em;
            display: flex;
            align-items: center;
            text-shadow: 0 0 5px var(--primary-color), 0 0 10px var(--primary-color);
        }
        .header-content h1 a i {
            margin-right: 10px;
            font-size: 0.9em;
        }
        
        /* BUSCA (Estilo Cyber) */
        .search-bar-container { 
            display: flex; align-items: center; 
            flex-grow: 1; 
            max-width: 400px; 
            margin: 0 30px; 
            background: var(--bg-dark-1); 
            border: 1px solid var(--border-color);
            border-radius: 4px; 
            overflow: hidden; 
        }
        .search-bar-container input { 
            border: none; padding: 8px 15px; 
            flex-grow: 1; outline: none; 
            background: transparent;
            color: var(--text-color); 
            font-family: 'Chakra Petch', sans-serif;
            font-size: 1em;
        }
        .search-bar-container button { 
            background: var(--primary-color); 
            border: none; 
            color: var(--bg-dark-1); 
            padding: 8px 12px; 
            cursor: pointer; 
            font-size: 1.1em; 
            font-weight: 700; 
        }
        
        /* Ícones e Navegação */
        .nav-icons { display: flex; gap: 20px; font-size: 1.2em; align-items: center; }
        .nav-icon { color: var(--primary-color); text-decoration: none; }
        .nav-icon:hover { color: var(--secondary-color); }
        .user-auth-link { 
            color: var(--primary-color); 
            text-decoration: none; 
            font-size: 0.9em; 
            padding: 5px 10px; 
            border: 1px solid var(--primary-color); 
            border-radius: 4px; 
            transition: all 0.3s;
        }
        .user-auth-link:hover { 
            background-color: var(--primary-color); 
            color: var(--bg-dark-1);
            box-shadow: 0 0 10px var(--primary-color);
        }
        .username { font-size: 0.9em; margin-right: 10px; }

        /* Estilos do Dropdown (Menu de Usuário) */
        .user-dropdown { position: relative; display: inline-block; }
        .dropbtn { 
            background-color: transparent; 
            color: var(--primary-color); 
            padding: 8px 12px; 
            font-size: 1em; 
            border: 1px solid var(--primary-color); 
            border-radius: 4px; 
            cursor: pointer; 
            font-family: 'Chakra Petch', sans-serif;
        }
        .dropdown-content { 
            display: none; 
            position: absolute; 
            background-color: var(--bg-dark-2); 
            min-width: 200px; 
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.5); 
            z-index: 1; right: 0; 
            border-radius: 4px; 
            border: 1px solid var(--border-color);
        }
        .dropdown-content a { color: var(--text-color); padding: 12px 16px; text-decoration: none; display: block; font-size: 0.9em; }
        .dropdown-content a:hover { background-color: var(--bg-dark-1); color: var(--primary-color); }
        .user-dropdown:hover .dropdown-content { display: block; }
        .dropdown-content a i { margin-right: 10px; width: 15px; }
        
        /* Container Geral */
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        h2 { 
            border-bottom: 1px solid var(--primary-color); 
            padding-bottom: 8px; 
            margin-bottom: 25px; 
            font-weight: 500; 
            color: var(--primary-color);
            text-shadow: 0 0 5px rgba(0, 240, 255, 0.5);
        }
        
        /* Menu Secundário (Categorias) */
        .category-nav { background-color: var(--bg-dark-1); padding: 8px 0; border-bottom: 1px solid var(--border-color); }
        .category-nav .container { margin: 0 auto; display: flex; justify-content: center; } 
        .category-nav a { color: var(--nav-link); text-decoration: none; padding: 0 15px; font-size: 0.95em; transition: color 0.3s; }
        .category-nav a:hover { color: var(--primary-color); }

        /* Estilos de Botões */
        .btn { 
            display: inline-block; 
            padding: 10px 18px; 
            background-color: var(--secondary-color); /* Rosa Neon */
            color: white; 
            border-radius: 4px; 
            border: 1px solid var(--secondary-color);
            cursor: pointer; 
            text-decoration: none; 
            font-weight: 700; 
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(240, 0, 255, 0.4);
        }
        .btn:hover { 
            background-color: var(--bg-dark-1);
            color: var(--secondary-color);
            box-shadow: 0 0 20px rgba(240, 0, 255, 0.8);
        }
        .success { /* Verde Neon (ou Ciano) */
            background-color: var(--primary-color); 
            color: var(--bg-dark-1); 
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(0, 240, 255, 0.4);
        }
        .success:hover { 
            background-color: var(--bg-dark-1);
            color: var(--primary-color);
            box-shadow: 0 0 20px rgba(0, 240, 255, 0.8);
        }
        
        /* Grid de Produtos */
        .product-grid, .product-grid-5, .promo-grid { display: grid; gap: 20px; }
        .product-grid { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); }
        .product-grid-5 { grid-template-columns: repeat(5, 1fr); }
        .promo-grid { grid-template-columns: repeat(5, 1fr); }

        /* Card de Produto */
        .product-card {
            background-color: var(--bg-dark-2);
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            text-decoration: none;
            color: var(--text-color);
            overflow: hidden;
            display: flex; flex-direction: column;
            border: 1px solid var(--border-color);
        }
        .product-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
            box-shadow: 0 8px 20px rgba(0, 240, 255, 0.3);
        }
        .product-info { padding: 15px; flex-grow: 1; }
        
        /* Tags */
        .category-tag {
            display: inline-block;
            background-color: var(--primary-color); 
            color: var(--bg-dark-1);
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            font-weight: 700;
            margin-right: 5px;
            text-transform: uppercase;
        }
        .promo-tag { 
            display: inline-block; background-color: var(--secondary-color); color: var(--bg-dark-1); padding: 3px 8px; border-radius: 4px; font-size: 0.8em; font-weight: 700; margin-bottom: 5px;
        }
        
        /* Seção de Promoções (index.html) */
        .promo-section {
            background-color: var(--bg-dark-2);
            padding: 30px;
            margin-bottom: 40px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .promo-section h2 {
            color: var(--secondary-color);
            border-bottom: 2px solid var(--secondary-color);
            text-shadow: 0 0 10px var(--secondary-color);
        }
        
        /* Tabela */
        table { width: 100%; border-collapse: separate; border-spacing: 0; margin-bottom: 20px; background-color: var(--bg-dark-2); border: 1px solid var(--border-color); border-radius: 8px; overflow: hidden; }
        th, td { border: 1px solid var(--border-color); padding: 12px; text-align: left; }
        th { background-color: var(--bg-dark-1); font-weight: 500; color: var(--primary-color); }
        
        /* Footer */
        footer { text-align: center; padding: 20px; margin-top: 50px; background-color: var(--bg-dark-2); color: #aaa; font-size: 0.8em; border-top: 2px solid var(--primary-color); }

    </style>
</head>
<body>
    <div class="header">
        <div class="header-content container">
            
            <h1>
                <a href="{{ url_for('index') }}">
                    <i class="fas fa-rocket"></i> TechNova Store
                </a>
            </h1>
            
            <form method="GET" action="{{ url_for('busca') }}" class="search-bar-container">
                <input type="text" name="termo" placeholder="Buscar na TechNova..." />
                <button type="submit"><i class="fas fa-search"></i></button>
            </form>

            <nav class="nav-icons">
                <a href="{{ url_for('checkout_web') }}" class="nav-icon" title="Carrinho de Compras"><i class="fas fa-shopping-cart"></i></a>
                
                {% if session.get('logged_in') %}
                    <div class="user-dropdown">
                        <button class="dropbtn">Olá, {{ session.get('user_name') }} <i class="fas fa-chevron-down" style="font-size: 0.8em;"></i></button>
                        <div class="dropdown-content">
                            <a href="{{ url_for('perfil_usuario') }}"><i class="fas fa-user-circle"></i> Meu Perfil</a>
                            <a href="{{ url_for('pedidos_prontos') }}"><i class="fas fa-box-open"></i> Meus Pedidos</a>
                            <hr style="border: 0; height: 1px; background-color: #555; margin: 5px 0;">
                            <a href="{{ url_for('logout') }}" style="color: #FF5577;"><i class="fas fa-sign-out-alt"></i> Sair</a>
                        </div>
                    </div>
                {% else %}
                    <a href="{{ url_for('login_cadastro') }}" class="user-auth-link">
                        <i class="fas fa-user"></i> Entrar / Cadastrar
                    </a>
                {% endif %}
            </nav>
        </div>
    </div>
    
    <div class="category-nav">
        <div class="container" style="max-width: 1200px;">
            <a href="{{ url_for('busca') }}">Departamentos</a>
            <a href="{{ url_for('busca', categoria='Eletrônico') }}">Eletrônicos</a>
            <a href="{{ url_for('busca', categoria='Móveis') }}">Móveis</a>
            <a href="{{ url_for('busca', categoria='Livro') }}">Livros</a>
            <a href="{{ url_for('busca', categoria='Vestuário') }}">Vestuário</a>
            <a href="{{ url_for('busca', categoria='Acessório') }}">Acessórios</a>
            <a href="{{ url_for('busca', categoria='Informática') }}">Informática</a>
            {% if session.get('is_admin') %}
                <a href="{{ url_for('admin_dashboard') }}" style="color: var(--secondary-color); font-weight: 700;">ADMINISTRATIVO</a>
            {% endif %}
        </div>
    </div>
    
    <div class="container">
        {% block content %}
        {% endblock %}
    </div>

    <footer>
        <p>&copy; 2025 TechNova Store - Demonstração POO/Flask (Tema Cyber).</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const aviso = urlParams.get('erro_carrinho');
            if (aviso) {
                alert('Atenção: ' + aviso); 
                history.replaceState(null, '', location.pathname);
            }
        });
    </script>
</body>
</html>