<div class="product-card">
    <img src="{{ produto.imagem_url }}" alt="{{ produto.nome }}" class="product-img" style="width: 100%; height: 180px; object-fit: cover; background-color: #f0f0f0;">
    
    <div class="product-info">
        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <span class="category-tag">{{ produto.categoria }}</span>
            
            {% if produto.preco < 1000 %}
                <span class="promo-tag">PROMOÇÃO!</span>
            {% endif %}
        </div>
        
        <h3 style="font-size: 1.1em; margin: 8px 0 10px 0; line-height: 1.3; min-height: 40px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
            {{ produto.nome }}
        </h3>
        
        <p class="product-rating" style="color: gold; font-size: 1em; margin: 5px 0 0 0;">
            {{ "★" * (produto.calcular_media_avaliacoes() | round(0, 'floor') | int) }}{{ "☆" * (5 - (produto.calcular_media_avaliacoes() | round(0, 'floor') | int)) }} 
            ({{ produto.calcular_media_avaliacoes() }})
        </p>
        
        <!-- Este container vai ficar no final do card -->
        <div style="margin-top: auto; border-top: 1px solid #eee; padding-top: 15px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <p class="product-price" style="font-size: 1.6em; font-weight: 700; color: var(--cor-primaria); margin: 0;">R$ {{ "%.2f"|format(produto.preco) }}</p>
                    <p style="font-size: 0.8em; color: #666; margin: 0;">Frete: R$ {{ "%.2f"|format(produto.calcular_frete()) }}</p>
                </div>
                
                <a href="{{ url_for('detalhe_produto', pid=pid) }}" class="btn" style="background-color: var(--cor-secundaria); color: var(--cor-primaria); font-size: 0.9em; padding: 8px 12px; text-decoration: none; border-radius: 4px; font-weight: 600;">Detalhes</a>
            </div>
        </div>
        
    </div>
</div>